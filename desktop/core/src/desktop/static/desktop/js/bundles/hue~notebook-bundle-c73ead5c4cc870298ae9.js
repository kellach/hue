/*!
 * 
 * Licensed to Cloudera, Inc. under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  Cloudera, Inc. licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 * 
 * http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * 
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([["hue~notebook"],{"./desktop/core/src/desktop/js/api/apiHelper.js":
/*!******************************************************!*\
  !*** ./desktop/core/src/desktop/js/api/apiHelper.js ***!
  \******************************************************/
/*! exports provided: default */function(e,t,a){"use strict";a.r(t);var s=a(/*! jquery */"./node_modules/jquery/dist/jquery.js"),r=a.n(s),o=a(/*! api/apiQueueManager */"./desktop/core/src/desktop/js/api/apiQueueManager.js"),i=a(/*! api/cancellablePromise */"./desktop/core/src/desktop/js/api/cancellablePromise.js"),n=a(/*! utils/hueDebug */"./desktop/core/src/desktop/js/utils/hueDebug.js"),l=a(/*! utils/huePubSub */"./desktop/core/src/desktop/js/utils/huePubSub.js"),c=a(/*! utils/hueUtils */"./desktop/core/src/desktop/js/utils/hueUtils.js");function u(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var f="/desktop/api2/doc/",d="/metadata/api/navigator/add_tags",h="/metadata/api/navigator/delete_tags",m="/metadata/api/navigator/find_entity",v="/metadata/api/navigator/list_tags",y="/metadata/api/navigator/update_properties",g="/metadata/api/optimizer/top_aggs",b="/metadata/api/optimizer/top_columns",k="/metadata/api/optimizer/top_filters",w="/metadata/api/optimizer/top_joins",E="/metadata/api/optimizer/top_tables",C="/metadata/api/optimizer/table_details",S=function(e){var t=this.getAssistCacheIdentifier(e),a=r.a.totalStorage(t)||{},s=e.hash?e.url+e.hash:e.url;if(e.refreshCache||void 0===a[s]||this.hasExpired(a[s].timestamp,e.cacheType||"default"))return void 0!==e.editor&&null!==e.editor&&e.editor.showSpinner(),e.fetchFunction(function(e){a[s]={timestamp:(new Date).getTime(),data:e};try{r.a.totalStorage(t,a)}catch(e){}});e.promise&&e.promise.resolve(a[s].data),e.successCallback(a[s].data)},j=function(e,t,a){var s=r.a.Deferred(),o={};t.paths.forEach(function(e){o[e.join(".")]=!0});var n={dbTables:ko.mapping.toJSON(Object.keys(o))},l=e.simplePost(a,n,{silenceErrors:t.silenceErrors,successCallback:function(e){e.hueTimestamp=Date.now(),s.resolve(e)},errorCallback:s.reject});return new i.default(s,l)},T=function e(t,a,s){p(this,e);this.id=c.default.UUID(),this.type=s.result.type||t,this.compute=a,this.status=s.status||"running",this.result=s.result||{},this.result.type="table"},O=new(function(){function e(){p(this,e);var t=this;t.queueManager=o.default,l.default.subscribe("assist.clear.hdfs.cache",function(){r.a.totalStorage(t.getAssistCacheIdentifier({sourceType:"hdfs"}),{})}),l.default.subscribe("assist.clear.adls.cache",function(){r.a.totalStorage(t.getAssistCacheIdentifier({sourceType:"adls"}),{})}),l.default.subscribe("assist.clear.git.cache",function(){r.a.totalStorage(t.getAssistCacheIdentifier({sourceType:"git"}),{})}),l.default.subscribe("assist.clear.s3.cache",function(){r.a.totalStorage(t.getAssistCacheIdentifier({sourceType:"s3"}),{})}),l.default.subscribe("assist.clear.collections.cache",function(){r.a.totalStorage(t.getAssistCacheIdentifier({sourceType:"collections"}),{})}),l.default.subscribe("assist.clear.hbase.cache",function(){r.a.totalStorage(t.getAssistCacheIdentifier({sourceType:"hbase"}),{})}),l.default.subscribe("assist.clear.document.cache",function(){r.a.totalStorage(t.getAssistCacheIdentifier({sourceType:"document"}),{})});var a=function(){t.clearDbCache({sourceType:"hive",clearAll:!0}),t.clearDbCache({sourceType:"impala",clearAll:!0}),r.a.totalStorage(t.getAssistCacheIdentifier({sourceType:"hdfs"}),{}),r.a.totalStorage(t.getAssistCacheIdentifier({sourceType:"adls"}),{}),r.a.totalStorage(t.getAssistCacheIdentifier({sourceType:"git"}),{}),r.a.totalStorage(t.getAssistCacheIdentifier({sourceType:"s3"}),{}),r.a.totalStorage(t.getAssistCacheIdentifier({sourceType:"collections"}),{}),r.a.totalStorage(t.getAssistCacheIdentifier({sourceType:"hbase"}),{}),r.a.totalStorage(t.getAssistCacheIdentifier({sourceType:"document"}),{})};l.default.subscribe("assist.clear.all.caches",a),window.performance&&window.performance.navigation&&1===window.performance.navigation.type&&-1!==location.href.indexOf("/metastore")&&a()}var t,a,s;return t=e,(a=[{key:"hasExpired",value:function(e,t){return void 0!==n.default&&void 0!==n.default.cacheTimeout?(new Date).getTime()-e>n.default.cacheTimeout:(new Date).getTime()-e>CACHEABLE_TTL[t]}},{key:"getTotalStorageUserPrefix",value:function(e){return e+"_"+LOGGED_USERNAME+"_"+window.location.hostname}},{key:"getAssistCacheIdentifier",value:function(e){return"hue.assist."+(e.cacheType||"default")+"."+this.getTotalStorageUserPrefix(e.sourceType)}},{key:"setInTotalStorage",value:function(e,t,a){try{var s=r.a.totalStorage("hue.user.settings."+this.getTotalStorageUserPrefix(e))||{};null!=a?(s[t]=a,r.a.totalStorage("hue.user.settings."+this.getTotalStorageUserPrefix(e),s,{secure:window.location.protocol.indexOf("https")>-1})):s[t]&&(delete s[t],r.a.totalStorage("hue.user.settings."+this.getTotalStorageUserPrefix(e),s,{secure:window.location.protocol.indexOf("https")>-1}))}catch(e){}}},{key:"getFromTotalStorage",value:function(e,t,a){var s=r.a.totalStorage("hue.user.settings."+this.getTotalStorageUserPrefix(e))||{};return void 0!==s[t]?s[t]:a}},{key:"withTotalStorage",value:function(e,t,a,s,r){var o=this,i=o.getFromTotalStorage(e,t,s);return r||"undefined"===i||a(i),a.subscribe(function(a){"assist"===e&&"assist_panel_visible"===t&&l.default.publish("assist.forceRender"),o.setInTotalStorage(e,t,a)}),a}},{key:"successResponseIsError",value:function(e){return void 0!==e&&(void 0!==e.traceback||void 0!==e.status&&0!==e.status||503===e.code||500===e.code)}},{key:"assistErrorCallback",value:function(e){return function(t){var a="Unknown error occurred";if(null!=t){if(void 0!==t.statusText&&"abort"===t.statusText)return;if(void 0!==t.responseText)try{var s=JSON.parse(t.responseText);a=void 0!==s.message?s.message:t.responseText}catch(e){a=t.responseText}else void 0!==t.message&&null!==t.message?a=t.message:void 0!==t.statusText&&null!==t.statusText?a=t.statusText:"undefined"!==t.error&&"[object String]"===Object.prototype.toString.call(t.error)?a=t.error:"[object String]"===Object.prototype.toString.call(t)&&(a=t)}return e&&e.silenceErrors||(c.default.logError(t),a&&-1===a.indexOf("AuthorizationException")&&r()(document).trigger("error",a)),e&&e.errorCallback&&e.errorCallback(a),a}}},{key:"cancelActiveRequest",value:function(e){null!=e&&((e.getReadyState?e.getReadyState():e.readyState)<4&&e.abort())}},{key:"simplePost",value:function(e,t,a){var s=this,o=r.a.Deferred(),i=r.a.post(e,t,function(e){s.successResponseIsError(e)?o.reject(s.assistErrorCallback(a)(e)):(a&&a.successCallback&&a.successCallback(e),o.resolve(e))}).fail(s.assistErrorCallback(a));i.fail(function(e){o.reject(s.assistErrorCallback(a)(e))});var n=o.promise();return n.getReadyState=function(){return i.readyState},n.abort=function(){i.abort()},n}},{key:"saveSnippetToFile",value:function(e,t){r.a.post("/filebrowser/save",e,function(e){void 0!==t.successCallback&&t.successCallback(e)},"json").fail(this.assistErrorCallback(t))}},{key:"simpleGet",value:function(e,t,a){var s=this;return a||(a={}),r.a.get(e,t,function(e){s.successResponseIsError(e)?s.assistErrorCallback(a)(e):void 0!==a.successCallback&&a.successCallback(e)}).fail(s.assistErrorCallback(a))}},{key:"fetchUsersAndGroups",value:function(e){r.a.ajax({method:"GET",url:"/desktop/api/users/autocomplete",data:e.data||{},contentType:"application/json"}).done(function(t){e.successCallback(t)}).fail(function(t){e.errorCallback(t)})}},{key:"fetchUsersByIds",value:function(e){r.a.ajax({method:"GET",url:"/desktop/api/users",data:{userids:e.userids},contentType:"application/json"}).done(function(t){e.successCallback(t)}).fail(function(t){e.errorCallback(t)})}},{key:"fetchStoragePreview",value:function(e){var t,a=this;t="s3"===e.type?"/filebrowser/view=S3A://":"adls"===e.type?"/filebrowser/view=adl:/":"/filebrowser/view=/";var s=e.path.concat();s.length&&"/"===s[0]&&s.shift(),t+=s.join("/").replace(/#/g,"%23")+"?compression=none&mode=text",t+="&offset="+(e.offset||0),t+="&length="+(e.length||118784);var o=r.a.Deferred();return r.a.ajax({dataType:"json",url:t,success:function(t){a.successResponseIsError(t)?o.reject(a.assistErrorCallback(e)(t)):o.resolve(t)},fail:o.reject}),o.promise()}},{key:"fetchHdfsPath",value:function(e){var t=this;e.pathParts.length>0&&("/"===e.pathParts[0]||""===e.pathParts[0])&&e.pathParts.shift();var a="/filebrowser/view=/"+encodeURI(e.pathParts.join("/"))+"?format=json&sortby=name&descending=false&pagesize="+(e.pageSize||500)+"&pagenum="+(e.page||1);e.filter&&(a+="&filter="+e.filter);return S.bind(t)(r.a.extend({},e,{sourceType:"hdfs",url:a,fetchFunction:function(s){if(0!==e.timeout)return r.a.ajax({dataType:"json",url:a,timeout:e.timeout,success:function(a){a.error||t.successResponseIsError(a)||void 0===a.files||null===a.files?t.assistErrorCallback(e)(a):(a.files.length>2&&!e.filter&&s(a),e.successCallback(a))}}).fail(t.assistErrorCallback(e)).always(function(){void 0!==e.editor&&null!==e.editor&&e.editor.hideSpinner()});t.assistErrorCallback(e)({status:-1})}}))}},{key:"fetchAdlsPath",value:function(e){var t=this;e.pathParts.shift();var a="/filebrowser/view=adl:/"+encodeURI(e.pathParts.join("/"))+"?format=json&sortby=name&descending=false&pagesize="+(e.pageSize||500)+"&pagenum="+(e.page||1);e.filter&&(a+="&filter="+e.filter);return S.bind(t)(r.a.extend({},e,{sourceType:"adls",url:a,fetchFunction:function(s){if(0!==e.timeout)return r.a.ajax({dataType:"json",url:a,timeout:e.timeout,success:function(a){a.error||t.successResponseIsError(a)||void 0===a.files||null===a.files?t.assistErrorCallback(e)(a):(a.files.length>2&&!e.filter&&s(a),e.successCallback(a))}}).fail(t.assistErrorCallback(e)).always(function(){void 0!==e.editor&&null!==e.editor&&e.editor.hideSpinner()});t.assistErrorCallback(e)({status:-1})}}))}},{key:"fetchGitContents",value:function(e){var t=this,a="/desktop/api/vcs/contents/?path="+encodeURI(e.pathParts.join("/"))+"&fileType="+e.fileType;S.bind(t)(r.a.extend({},e,{sourceType:"git",url:a,fetchFunction:function(s){0!==e.timeout?r.a.ajax({dataType:"json",url:a,timeout:e.timeout,success:function(a){a.error||t.successResponseIsError(a)?t.assistErrorCallback(e)(a):"dir"===a.fileType&&void 0!==a.files&&null!==a.files?(a.files.length>2&&s(a),e.successCallback(a)):"file"===a.fileType&&void 0!==a.content&&null!==a.content&&e.successCallback(a)}}).fail(t.assistErrorCallback(e)):t.assistErrorCallback(e)({status:-1})}}))}},{key:"fetchS3Path",value:function(e){var t=this;e.pathParts.shift();var a="/filebrowser/view=S3A://"+encodeURI(e.pathParts.join("/"))+"?format=json&sortby=name&descending=false&pagesize="+(e.pageSize||500)+"&pagenum="+(e.page||1);e.filter&&(a+="&filter="+e.filter);S.bind(t)(r.a.extend({},e,{sourceType:"s3",url:a,fetchFunction:function(s){0!==e.timeout?r.a.ajax({dataType:"json",url:a,timeout:e.timeout,success:function(a){a.error||t.successResponseIsError(a)||void 0===a.files||null===a.files?t.assistErrorCallback(e)(a):(a.files.length>2&&!e.filter&&s(a),e.successCallback(a))}}).fail(t.assistErrorCallback(e)).always(function(){void 0!==e.editor&&null!==e.editor&&e.editor.hideSpinner()}):t.assistErrorCallback(e)({status:-1})}}))}},{key:"fetchDashboardTerms",value:function(e){var t=this;0!==e.timeout?r.a.ajax({dataType:"json",url:"/dashboard/get_terms",type:"POST",data:{collection:ko.mapping.toJSON({id:"",name:e.collectionName,engine:e.engine||"solr"}),analysis:ko.mapping.toJSON({name:e.fieldName,terms:{prefix:e.prefix||""}})},timeout:e.timeout,success:function(a){a.error||t.successResponseIsError(a)||0!==a.status?t.assistErrorCallback(e)(a):e.successCallback(a)}}).fail(t.assistErrorCallback(e)).always(e.alwaysCallback):t.assistErrorCallback(e)({status:-1})}},{key:"fetchDashboardStats",value:function(e){var t=this;0!==e.timeout?r.a.ajax({dataType:"json",url:"/dashboard/get_stats",type:"POST",data:{collection:ko.mapping.toJSON({id:"",name:e.collectionName,engine:e.engine||"solr"}),analysis:ko.mapping.toJSON({name:e.fieldName,stats:{facet:""}}),query:ko.mapping.toJSON({qs:[{q:""}],fqs:[]})},timeout:e.timeout,success:function(a){a.error||t.successResponseIsError(a)||0!==a.status?1===a.status?e.notSupportedCallback(a):t.assistErrorCallback(e)(a):e.successCallback(a)}}).fail(t.assistErrorCallback(e)).always(e.alwaysCallback):t.assistErrorCallback(e)({status:-1})}},{key:"fetchHBase",value:function(e){var t=this,a="getClusters";""!==e.parent.name&&(a="getTableList/"+e.parent.name);var s="/hbase/api/"+a;S.bind(t)(r.a.extend({},e,{sourceType:"hbase",url:s,fetchFunction:function(a){0!==e.timeout?r.a.ajax({dataType:"json",url:s,timeout:e.timeout,success:function(s){s.error||t.successResponseIsError(s)?t.assistErrorCallback(e)(s):(a(s),e.successCallback(s))}}).fail(t.assistErrorCallback(e)).always(function(){void 0!==e.editor&&null!==e.editor&&e.editor.hideSpinner()}):t.assistErrorCallback(e)({status:-1})}}))}},{key:"fetchResourceStats",value:function(e){var t=this,a=function(a){var s=Date.now();return t.simplePost("/metadata/api/prometheus/query",{query:ko.mapping.toJSON(a),start:Math.floor((s-e.pastMs)/1e3),end:Math.floor(s/1e3),step:e.stepMs/1e3})},s=r.a.Deferred();return r.a.when(a("round((go_memstats_alloc_bytes / go_memstats_sys_bytes) * 100)"),a("round((go_memstats_alloc_bytes / go_memstats_sys_bytes) * 100)"),a("round((go_memstats_alloc_bytes / go_memstats_sys_bytes) * 100)"),a('impala_queries_count{datawarehouse="'+e.clusterName+'"}'),a('impala_queries{datawarehouse="'+e.clusterName+'"}')).done(function(){for(var e={},t=0;t<arguments.length;t++){var a=arguments[t];if(a.data.result[0])for(var r=a.data.result[0].values,o=0;o<r.length;o++)e[r[o][0]]||(e[r[o][0]]=[1e3*r[o][0],0,0,0,0,0]),e[r[o][0]][t+1]=parseFloat(r[o][1])}var i=[];Object.keys(e).forEach(function(t){i.push(e[t])}),i.sort(function(e,t){return e[0]-t[0]}),s.resolve(i)}).fail(s.reject),s.promise()}},{key:"fetchConfigurations",value:function(e){this.simpleGet("/desktop/api/configurations",{},e)}},{key:"saveGlobalConfiguration",value:function(e){this.simplePost("/desktop/api/configurations",{configuration:ko.mapping.toJSON(e.configuration)},e)}},{key:"saveConfiguration",value:function(e){this.simplePost("/desktop/api/configurations/save/",{app:e.app,properties:ko.mapping.toJSON(e.properties),is_default:e.isDefault,group_id:e.groupId,user_id:e.userId},e)}},{key:"fetchDocuments",value:function(e){var t=this,a="";e.uuid&&(a+=e.uuid),e.type&&"all"!==e.type&&(a+=e.type);var s=t.queueManager.getQueued(f,a),o=void 0===s;if(o&&(s=r.a.Deferred(),t.queueManager.addToQueue(s,f,a)),s.done(e.successCallback).fail(t.assistErrorCallback(e)),o){var i={uuid:e.uuid};e.type&&"all"!==e.type&&(i.type=["directory",e.type]),r.a.ajax({url:f,data:i,traditional:!0,success:function(e){t.successResponseIsError(e)?s.reject(e):s.resolve(e)}}).fail(s.reject)}}},{key:"searchDocuments",value:function(e){var t=this;return r.a.ajax({url:"/desktop/api2/docs/",data:{uuid:e.uuid,text:e.query,type:e.type,page:e.page,limit:e.limit,include_trashed:e.include_trashed},success:function(a){t.successResponseIsError(a)?t.assistErrorCallback(e)(a):e.successCallback(a)}}).fail(t.assistErrorCallback(e))}},{key:"fetchDocument",value:function(e){var t=this,a=r.a.Deferred(),s=r.a.ajax({url:f,data:{uuid:e.uuid,data:!!e.fetchContents},success:function(s){t.successResponseIsError(s)?a.reject(t.assistErrorCallback({silenceErrors:e.silenceErrors})):a.resolve(s)}}).fail(t.assistErrorCallback({silenceErrors:e.silenceErrors,errorCallback:a.reject}));return new i.default(a,s)}},{key:"createDocumentsFolder",value:function(e){this.simplePost(f+"mkdir",{parent_uuid:ko.mapping.toJSON(e.parentUuid),name:ko.mapping.toJSON(e.name)},e)}},{key:"updateDocument",value:function(e){this.simplePost(f+"update",{uuid:ko.mapping.toJSON(e.uuid),name:e.name},e)}},{key:"uploadDocument",value:function(e){var t=this;r.a.ajax({url:f+"import",type:"POST",success:function(a){t.successResponseIsError(a)?t.assistErrorCallback(e)(a):e.successCallback(a)},xhr:function(){var t=r.a.ajaxSettings.xhr();return t.upload&&e.progressHandler&&t.upload.addEventListener("progress",e.progressHandler,!1),t},dataType:"json",data:e.formData,cache:!1,contentType:!1,processData:!1}).fail(t.assistErrorCallback(e))}},{key:"moveDocument",value:function(e){this.simplePost(f+"move",{source_doc_uuid:ko.mapping.toJSON(e.sourceId),destination_doc_uuid:ko.mapping.toJSON(e.destinationId)},e)}},{key:"deleteDocument",value:function(e){this.simplePost(f+"delete",{uuid:ko.mapping.toJSON(e.uuid),skip_trash:ko.mapping.toJSON(e.skipTrash||!1)},e)}},{key:"copyDocument",value:function(e){this.simplePost(f+"copy",{uuid:ko.mapping.toJSON(e.uuid)},e)}},{key:"restoreDocument",value:function(e){this.simplePost(f+"restore",{uuids:ko.mapping.toJSON(e.uuids)},e)}},{key:"clearDbCache",value:function(e){var t=this.getAssistCacheIdentifier(e);if(e.clearAll)r.a.totalStorage(t,{});else{var a="/notebook/api/autocomplete/";e.databaseName&&(a+=e.databaseName),e.tableName&&(a+="/"+e.tableName),e.fields&&(a+=e.fields.length>0?"/"+e.fields.join("/"):"");var s=r.a.totalStorage(t)||{};delete s[a],r.a.totalStorage(t,s)}}},{key:"invalidateSourceMetadata",value:function(e){var t=r.a.Deferred();if("impala"===e.sourceType&&("invalidate"===e.invalidate||"invalidateAndFlush"===e.invalidate)){var a={flush_all:"invalidateAndFlush"===e.invalidate,cluster:JSON.stringify(e.compute)};e.path&&e.path.length>0&&(a.database=e.path[0]),e.path&&e.path.length>1&&(a.table=e.path[1]);var s=this.simplePost("/impala/api/invalidate",a,e).done(t.resolve).fail(t.reject);return new i.default(t,s)}return t.resolve().promise()}},{key:"fetchSourceMetadata",value:function(e){var t=this,a=r.a.Deferred(),s=-1!==e.sourceType.indexOf("-query"),o=s?e.sourceType.replace("-query",""):e.sourceType,n=r.a.ajax({type:"POST",url:"/notebook/api/autocomplete/"+(s?e.path.slice(1):e.path).join("/"),data:{notebook:{},snippet:ko.mapping.toJSON({type:o,source:s?"query":"data"}),cluster:ko.mapping.toJSON(e.compute?e.compute:'""')},timeout:e.timeout}).done(function(s){s.notFound=0===s.status&&500===s.code&&s.error&&(-1!==s.error.indexOf("Error 10001")||-1!==s.error.indexOf("AnalysisException")),s.hueTimestamp=Date.now(),!s.notFound&&t.successResponseIsError(s)?t.assistErrorCallback({silenceErrors:e.silenceErrors,errorCallback:a.reject})(s):a.resolve(s)}).fail(t.assistErrorCallback({silenceErrors:e.silenceErrors,errorCallback:a.reject}));return new i.default(a,n)}},{key:"updateSourceMetadata",value:function(e){var t,a={source_type:e.sourceType};return 1===e.path.length?(t="/metastore/databases/"+e.path[1]+"/alter",a.properties=ko.mapping.toJSON(e.properties)):2===e.path.length?(t="/metastore/table/"+e.path[0]+"/"+e.path[1]+"/alter",e.properties&&(e.properties.comment&&(a.comment=e.properties.comment),e.properties.name&&(a.new_table_name=e.properties.name))):e.path>2&&(t="/metastore/table/"+e.path[0]+"/"+e.path[1]+"/alter_column",a.column=e.path.slice(2).join("."),e.properties&&(e.properties.comment&&(a.comment=e.properties.comment),e.properties.name&&(a.new_column_name=e.properties.name),e.properties.type&&(a.new_column_type=e.properties.name),e.properties.partitions&&(a.partition_spec=ko.mapping.toJSON(e.properties.partitions)))),this.simplePost(t,a,e)}},{key:"fetchAnalysis",value:function(e){var t,a=r.a.Deferred();1===e.path.length?t="/metastore/databases/"+e.path[0]+"/metadata":(t="/"+("hive"===e.sourceType?"beeswax":e.sourceType)+"/api/table/"+e.path[0],e.path.length>1&&(t+="/"+e.path[1]+"/"),e.path.length>2&&(t+="stats/"+e.path.slice(2).join("/")));var s={format:"json",cluster:JSON.stringify(e.compute),source_type:e.sourceType},o=this[e.path.length<3?"simplePost":"simpleGet"](t,s,{silenceErrors:e.silenceErrors,successCallback:function(t){1===e.path.length?t.data?(t.data.hueTimestamp=Date.now(),a.resolve(t.data)):a.reject():a.resolve(t)},errorCallback:a.reject});return new i.default(a,o)}},{key:"fetchPartitions",value:function(e){var t=this,a=r.a.Deferred(),s=r.a.post("/metastore/table/"+e.path.join("/")+"/partitions",{format:"json",cluster:JSON.stringify(e.compute)}).done(function(s){t.successResponseIsError(s)?t.assistErrorCallback({silenceErrors:e.silenceErrors,errorCallback:a.reject})(s):(s||(s={}),s.hueTimestamp=Date.now(),a.resolve(s))}).fail(function(s){s&&s.responseText&&-1!==s.responseText.indexOf("is not partitioned")?a.resolve({hueTimestamp:Date.now(),partition_keys_json:[],partition_values_json:[]}):t.assistErrorCallback({silenceErrors:e.silenceErrors,errorCallback:a.reject})(s)});return new i.default(a,s)}},{key:"refreshAnalysis",value:function(e){var t=this;if(1===e.path.length)return t.fetchAnalysis(e);var a=r.a.Deferred(),s=[],o="/"+("hive"===e.sourceType?"beeswax":e.sourceType)+"/api/analyze/"+e.path.join("/")+"/";return s.push(t.simplePost(o,void 0,{silenceErrors:e.silenceErrors,successCallback:function(r){s.pop(),0===r.status&&r.watch_url?function r(o,i){window.setTimeout(function(){s.push(t.simplePost(o,void 0,{silenceErrors:e.silenceErrors,successCallback:function(i){s.pop(),i.isSuccess?s.push(t.fetchAnalysis(e).done(a.resolve).fail(a.reject)):i.isFailure?a.reject(i):r(o,1e3)},errorCallback:a.reject}))},i)}(r.watch_url,500):a.reject()},errorCallback:a.reject})),new i.default(a,void 0,s)}},{key:"whenAvailable",value:function(e){var t=this,a=r.a.Deferred(),s=[],o=-1;a.fail(function(){window.clearTimeout(o)});return function r(){var n=t.simplePost("/notebook/api/check_status",{notebook:e.notebookJson,snippet:e.snippetJson,cluster:ko.mapping.toJSON(e.compute?e.compute:'""')},{silenceErrors:e.silenceErrors}).done(function(e){if(e&&e.query_status&&e.query_status.status){var t=e.query_status.status;"available"===t?a.resolve():"running"===t||"starting"===t||"waiting"===t?o=window.setTimeout(function(){r()},500):a.reject()}}).fail(a.reject);s.push(new i.default(n,n))}(),new i.default(a,void 0,s)}},{key:"fetchSample",value:function(e){var t=this,a=r.a.Deferred(),s=[],o=null,n=null;return t.simplePost("/notebook/api/sample/"+e.path.join("/"),{notebook:{},snippet:JSON.stringify({type:e.sourceType,compute:e.compute}),async:!0,operation:'"'+(e.operation||"default")+'"',cluster:ko.mapping.toJSON(e.compute?e.compute:'""')},{silenceErrors:e.silenceErrors}).done(function(r){var i=new T(e.sourceType,e.compute,r);if(o=JSON.stringify({type:e.sourceType}),n=JSON.stringify(i),r&&r.rows){var l={data:r.rows,meta:r.full_headers};l.hueTimestamp=Date.now(),a.resolve(l)}else s.push(t.whenAvailable({notebookJson:o,snippetJson:n,compute:e.compute,silenceErrors:e.silenceErrors}).done(function(){var r=t.simplePost("/notebook/api/fetch_result_data",{notebook:o,snippet:n,rows:e.sampleCount||100,startOver:"false"},{silenceErrors:e.silenceErrors}).done(function(e){var t=e&&e.result||{data:[],meta:[]};t.hueTimestamp=Date.now(),a.resolve(t)}).fail(a.reject);s.push(r,r)}).fail(a.reject))}).fail(a.reject),s.push({cancel:function(){o&&t.simplePost("/notebook/api/cancel_statement",{notebook:o,snippet:n,cluster:ko.mapping.toJSON(e.compute?e.compute:'""')},{silenceErrors:e.silenceErrors})}}),new i.default(a,void 0,s)}},{key:"fetchNavigatorMetadata",value:function(e){var t=r.a.Deferred(),a=m;if(1===e.path.length)a+="?type=database&name="+e.path[0];else if(2===e.path.length)a+=(e.isView?"?type=view":"?type=table")+"&database="+e.path[0]+"&name="+e.path[1];else{if(3!==e.path.length)return new i.default(r.a.Deferred().reject());a+="?type=field&database="+e.path[0]+"&table="+e.path[1]+"&name="+e.path[2]}var s=this.simplePost(a,{notebook:{},snippet:ko.mapping.toJSON({type:"nav"})},{silenceErrors:e.silenceErrors,successCallback:function(e){(e=e.entity||e).hueTimestamp=Date.now(),t.resolve(e)},errorCallback:t.reject});return new i.default(t,s)}},{key:"updateNavigatorProperties",value:function(e){var t={id:ko.mapping.toJSON(e.identity)};return e.properties&&(t.properties=ko.mapping.toJSON(e.properties)),e.modifiedCustomMetadata&&(t.modifiedCustomMetadata=ko.mapping.toJSON(e.modifiedCustomMetadata)),e.deletedCustomMetadataKeys&&(t.deletedCustomMetadataKeys=ko.mapping.toJSON(e.deletedCustomMetadataKeys)),this.simplePost(y,t,e)}},{key:"fetchAllNavigatorTags",value:function(e){var t=r.a.Deferred(),a=this.simplePost(v,void 0,{silenceErrors:e.silenceErrors,successCallback:function(e){e&&e.tags?t.resolve(e.tags):t.resolve({})},errorCallback:t.reject});return new i.default(t,a)}},{key:"addNavTags",value:function(e,t){return this.simplePost(d,{id:ko.mapping.toJSON(e),tags:ko.mapping.toJSON(t)})}},{key:"deleteNavTags",value:function(e,t){return this.simplePost(h,{id:ko.mapping.toJSON(e),tags:ko.mapping.toJSON(t)})}},{key:"fetchNavOptPopularity",value:function(e){var t,a,s=r.a.Deferred();if(1===e.paths.length&&1===e.paths[0].length)t=E,a={database:e.paths[0][0]};else{t=b;var o=[];e.paths.forEach(function(e){o.push(e.join("."))}),a={dbTables:ko.mapping.toJSON(o)}}var n=this.simplePost(t,a,{silenceErrors:e.silenceErrors,successCallback:function(e){e.hueTimestamp=Date.now(),s.resolve(e)},errorCallback:s.reject});return new i.default(s,n)}},{key:"fetchNavOptTopAggs",value:function(e){return j(this,e,g)}},{key:"fetchNavOptTopColumns",value:function(e){return j(this,e,b)}},{key:"fetchNavOptTopFilters",value:function(e){return j(this,e,k)}},{key:"fetchNavOptTopJoins",value:function(e){return j(this,e,w)}},{key:"fetchNavOptMeta",value:function(e){var t=r.a.Deferred(),a=this.simplePost(C,{databaseName:e.path[0],tableName:e.path[1]},{silenceErrors:e.silenceErrors,successCallback:function(e){0===e.status&&e.details?(e.details.hueTimestamp=Date.now(),t.resolve(e.details)):t.reject()},errorCallback:t.reject});return new i.default(t,a)}},{key:"fetchQueryExecutionAnalysis",value:function(e){var t=this,a=r.a.Deferred(),s=0,o=[],n=new i.default(a,void 0,o);return function r(){10!==s?(s++,o.pop(),o.push(a,t.simplePost("/impala/api/query/alanize",{cluster:JSON.stringify(e.compute),query_id:'"'+e.queryId+'"'},e).done(function(e){if(e&&e.data)a.resolve(e.data);else{var t=window.setTimeout(function(){r()},1e3+500*s);n.onCancel(function(){window.clearTimeout(t)})}}).fail(a.reject))):a.reject()}(),n}},{key:"fixQueryExecutionAnalysis",value:function(e){var t=r.a.Deferred(),a=this.simplePost("/impala/api/query/alanize/fix",{cluster:JSON.stringify(e.compute),fix:JSON.stringify(e.fix),start_time:e.start_time},{silenceErrors:e.silenceErrors,successCallback:function(e){0===e.status?t.resolve(e.details):t.reject()},errorCallback:t.reject});return new i.default(t,a)}},{key:"fetchQueryExecutionStatistics",value:function(e){var t=r.a.Deferred(),a=this.simplePost("/impala/api/query/alanize/metrics",{cluster:JSON.stringify(e.cluster),query_id:'"'+e.queryId+'"'},{silenceErrors:e.silenceErrors,successCallback:function(e){0===e.status?t.resolve(e.data):t.reject()},errorCallback:t.reject});return new i.default(t,a)}},{key:"fetchContextNamespaces",value:function(e){var t="/desktop/api2/context/namespaces/"+e.sourceType;return this.simpleGet(t,void 0,e)}},{key:"fetchContextComputes",value:function(e){var t="/desktop/api2/context/computes/"+e.sourceType;return this.simpleGet(t,void 0,e)}},{key:"fetchContextClusters",value:function(e){var t="/desktop/api2/context/clusters/"+e.sourceType;return this.simpleGet(t,void 0,e)}},{key:"getClusterConfig",value:function(e){return r.a.post("/desktop/api2/get_config/",e)}},{key:"fetchHueDocsInteractive",value:function(e){var t=r.a.Deferred(),a=r.a.post("/desktop/api/search/entities_interactive",{query_s:ko.mapping.toJSON(e),limit:50,sources:'["documents"]'}).done(function(e){0===e.status?t.resolve(e):t.reject(e)}).fail(t.reject);return new i.default(t,a)}},{key:"fetchNavEntitiesInteractive",value:function(e){var t=r.a.Deferred(),a=r.a.post("/desktop/api/search/entities_interactive",{query_s:ko.mapping.toJSON(e.query),field_facets:ko.mapping.toJSON(e.facets||[]),limit:50,sources:'["sql", "hdfs", "s3"]'}).done(function(e){0===e.status?t.resolve(e):t.reject(e)}).fail(t.reject);return new i.default(t,a)}},{key:"searchEntities",value:function(e){var t=r.a.Deferred(),a=this.simplePost("/desktop/api/search/entities",{query_s:ko.mapping.toJSON(e.query),limit:e.limit||100,raw_query:!!e.rawQuery,sources:e.sources?ko.mapping.toJSON(e.sources):'["sql"]'},{silenceErrors:e.silenceErrors,successCallback:t.resolve,errorCallback:t.reject});return new i.default(t,a)}},{key:"formatSql",value:function(e){var t=r.a.Deferred(),a=this.simplePost("/notebook/api/format",{statements:e.statements},{silenceErrors:e.silenceErrors,successCallback:t.resolve,errorCallback:t.reject});return new i.default(t,a)}}])&&u(t.prototype,a),s&&u(t,s),e}());t.default=O},"./desktop/core/src/desktop/js/api/apiQueueManager.js":
/*!************************************************************!*\
  !*** ./desktop/core/src/desktop/js/api/apiQueueManager.js ***!
  \************************************************************/
/*! exports provided: default */function(e,t,a){"use strict";function s(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}a.r(t);var r=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this.callQueue={}}var t,a,r;return t=e,(a=[{key:"getQueued",value:function(e,t){return this.callQueue[e+(t||"")]}},{key:"addToQueue",value:function(e,t,a){var s=this;s.callQueue[t+(a||"")]=e,e.always(function(){delete s.callQueue[t+(a||"")]})}}])&&s(t.prototype,a),r&&s(t,r),e}());t.default=r},"./desktop/core/src/desktop/js/api/cancellablePromise.js":
/*!***************************************************************!*\
  !*** ./desktop/core/src/desktop/js/api/cancellablePromise.js ***!
  \***************************************************************/
/*! exports provided: default */function(e,t,a){"use strict";a.r(t);var s=a(/*! api/apiHelper */"./desktop/core/src/desktop/js/api/apiHelper.js");function r(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var o=function(){function e(t,a,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this.cancelCallbacks=[],this.deferred=t,this.request=a,this.otherCancellables=s,this.cancelled=!1,this.cancelPrevented=!1}var t,a,o;return t=e,(a=[{key:"preventCancel",value:function(){return this.cancelPrevented=!0,this}},{key:"cancel",value:function(){if(!this.cancelPrevented&&!this.cancelled&&"pending"===this.state()){for(this.cancelled=!0,this.request&&s.default.cancelActiveRequest(this.request),this.state&&"pending"===this.state()&&this.deferred.reject&&this.deferred.reject(),this.otherCancellables&&this.otherCancellables.forEach(function(e){e.cancel&&e.cancel()});this.cancelCallbacks.length;)this.cancelCallbacks.pop()();return this}}},{key:"onCancel",value:function(e){return this.cancelled?e():this.cancelCallbacks.push(e),this}},{key:"then",value:function(){return this.deferred.then.apply(this.deferred,arguments),this}},{key:"done",value:function(e){return this.deferred.done.apply(this.deferred,arguments),this}},{key:"fail",value:function(e){return this.deferred.fail.apply(this.deferred,arguments),this}},{key:"always",value:function(e){return this.deferred.always.apply(this.deferred,arguments),this}},{key:"pipe",value:function(e){return this.deferred.pipe.apply(this.deferred,arguments),this}},{key:"progress",value:function(e){return this.deferred.progress.apply(this.deferred,arguments),this}},{key:"state",value:function(){return this.deferred.state&&this.deferred.state()}}])&&r(t.prototype,a),o&&r(t,o),e}();t.default=o},"./desktop/core/src/desktop/js/utils/hueDebug.js":
/*!*******************************************************!*\
  !*** ./desktop/core/src/desktop/js/utils/hueDebug.js ***!
  \*******************************************************/
/*! exports provided: default */function(e,t,a){"use strict";a.r(t);var s=a(/*! localforage */"./node_modules/localforage/dist/localforage.js"),r=a.n(s),o={clearCaches:function(){var e=[],t=function(t){e.push(r.a.createInstance({name:t+LOGGED_USERNAME}).clear())};t("HueContextCatalog_"),t("HueDataCatalog_"),t("HueDataCatalog_hive_"),t("HueDataCatalog_hive_multiTable_"),t("HueDataCatalog_impala_"),t("HueDataCatalog_impala_multiTable_"),Promise.all(e).then(function(){console.log("Done! Refresh the browser.")})}};t.default=o},"./desktop/core/src/desktop/js/utils/huePubSub.js":
/*!********************************************************!*\
  !*** ./desktop/core/src/desktop/js/utils/huePubSub.js ***!
  \********************************************************/
/*! exports provided: default */function(e,t,a){"use strict";a.r(t);var s={},r=s.hasOwnProperty,o={subscribe:function(e,t,a){r.call(s,e)||(s[e]=[]);var o=s[e].push({listener:t,app:a,status:"running"})-1;return{remove:function(){delete s[e][o]}}},removeAll:function(e){s[e]=[]},subscribeOnce:function(e,t,a){var s=this.subscribe(e,function(){t.apply(t,arguments),s.remove()},a)},publish:function(e,t){r.call(s,e)&&s[e].forEach(function(e){"running"===e.status&&e.listener(t)})},getTopics:function(){return s},pauseAppSubscribers:function(e){e&&Object.keys(s).forEach(function(t){s[t].forEach(function(t){void 0===t.app||null===t.app||t.app!==e&&t.app.split("-")[0]!==e||(t.status="paused")})})},resumeAppSubscribers:function(e){e&&Object.keys(s).forEach(function(t){s[t].forEach(function(t){void 0===t.app||null===t.app||t.app!==e&&t.app.split("-")[0]!==e||(t.status="running")})})},clearAppSubscribers:function(e){e&&Object.keys(s).forEach(function(t){s[t]=s[t].filter(function(t){return t.app!==e})})}};t.default=o},"./desktop/core/src/desktop/js/utils/hueUtils.js":
/*!*******************************************************!*\
  !*** ./desktop/core/src/desktop/js/utils/hueUtils.js ***!
  \*******************************************************/
/*! exports provided: default */function(e,t,a){"use strict";a.r(t);var s=a(/*! jquery */"./node_modules/jquery/dist/jquery.js"),r=a.n(s);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i={span3:function(){var e=r()(window).width();return e>=1200?23.07692308:e>=768&&e<=979?22.9281768:23.17073171},span9:function(){var e=r()(window).width();return e>=1200?74.35897436:e>=768&&e<=979?74.30939227:74.3902439},margin:function(){return 2.56410256}},n=function(e,t){var a="";if(t){var s=Object.keys(t);if(s.length)for(;s.length;){var r=s.pop();a+=r+"="+t[r],s.length&&(a+="&")}}if("undefined"!=typeof IS_EMBEDDED&&IS_EMBEDDED){var o=window.location.search;return a&&(o+=(o?"&":"?")+a),e=window.location.pathname+o+"#!"+e.replace("/hue",""),void window.history.pushState(null,null,e)}var i=e.split("#"),n=i[0];a&&(n+=(-1===n.indexOf("?")?"?":"&")+a),i.length>1?n+="#"+i[1]:window.location.hash&&(n+=window.location.hash),window.history.pushState(null,null,n)},l=function(e,t){if("undefined"!=typeof IS_EMBEDDED&&IS_EMBEDDED){var a=window.location.hash.replace("#!","").split("?"),s=a[0],r=a.length>1?a[1]:"";if(~r.indexOf(e+"="+t))return;if(~r.indexOf(e+"="))r=t?r.replace(new RegExp(e+"=[^&]*"),e+"="+t):r.replace(new RegExp(e+"=[^&]*&?"),"");else{if(!t)return;r&&(r+="&"),r+=e+"="+t}n(r?s+"?"+r:s)}else{var o="";null!==window.location.getParameter(e,!0)?(o+="?",window.location.search.replace(/\?/gi,"").split("&").forEach(function(t){t.split("=")[0]!==e&&(o+=t)}),t&&(o+=("?"!==o?"&":"")+e+"="+t)):o=window.location.search+(t?(window.location.search.indexOf("?")>-1?"&":"?")+e+"="+t:""),"?"===o&&(o=""),n(window.location.pathname+o)}},c=function e(t,a){t&&"object"===o(t)&&Object.keys(t).forEach(function(s){a(t,s),e(t[s],a)})},u=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};t.default={bootstrapRatios:i,getFileBrowseButton:function(e,t,a,s,o,i,n,l){var c;return(c=i?r()("<span>").addClass("add-on muted pointer filechooser-clickable").text(".."):l?r()("<a>").addClass("btn").addClass("fileChooserBtn filechooser-clickable").text(".."):r()("<button>").addClass("btn").addClass("fileChooserBtn filechooser-clickable").text("..")).click(function(i){function l(t,s){if(o&&o().filechooserPrefixSeparator&&(t=e.val().split(o().filechooserPrefixSeparator)[0]+"="+t),o&&o().filechooserOptions&&o().filechooserOptions.deploymentDir&&(e.data("fullPath",t),e.attr("data-original-title",t),0===t.indexOf(o().filechooserOptions.deploymentDir)&&(t=t.substr(o().filechooserOptions.deploymentDir.length+1))),s?e.val(t):e.val("hdfs://"+t),e.change(),a)if("function"==typeof a()||"function"==typeof a().value)if(a().value){if(a().value(e.val()),a().displayJustLastBit){e.data("fullPath",e.val()),e.attr("data-original-title",e.val());var r=e.val();e.val(r.split("/")[r.split("/").length-1])}}else a()(e.val());else a(e.val())}i.preventDefault(),n||r()(window.HUE_CONTAINER).addClass("modal-open"),function(){var a=""!==r.a.trim(e.val())?e.val():"/";(o&&o().filechooserOptions&&o().filechooserOptions.skipInitialPathIfEmpty&&""===e.val()||o&&o().filechooserPrefixSeparator)&&(a=""),e.data("fullPath")&&(a=e.data("fullPath")),a.indexOf("hdfs://")>-1&&(a=a.substring(7));var i=!!t;if(o&&void 0!==o().filechooserOptions&&void 0!==o().filechooserOptions.selectFolder&&(i=o().filechooserOptions.selectFolder),r()("#filechooser").jHueFileChooser({suppressErrors:!0,selectFolder:i,onFolderChoose:function(e){l(e,s),t&&(r()("#chooseFile").modal("hide"),n||r()(".modal-backdrop").remove())},onFileChoose:function(e){l(e,s),r()("#chooseFile").modal("hide"),n||r()(".modal-backdrop").remove()},createFolder:o&&o().filechooserOptions&&o().filechooserOptions.createFolder,uploadFile:o&&o().filechooserOptions&&o().filechooserOptions.uploadFile,initialPath:a,errorRedirectPath:"",forceRefresh:!0,showExtraHome:o&&o().filechooserOptions&&o().filechooserOptions.showExtraHome,extraHomeProperties:o&&o().filechooserOptions&&o().filechooserOptions.extraHomeProperties?o().filechooserOptions.extraHomeProperties:{},filterExtensions:o&&o().filechooserFilter?o().filechooserFilter:"",displayOnlyFolders:o&&o().filechooserOptions&&o().filechooserOptions.displayOnlyFolders}),window.isIE11){var c=r()().modal.Constructor.prototype.enforceFocus;r()().modal.Constructor.prototype.enforceFocus=function(){},r()("#chooseFile").modal("show"),window.setTimeout(function(){r()().modal.Constructor.prototype.enforceFocus=c},5e3)}else r()("#chooseFile").modal("show");n||r()("#chooseFile").on("hidden",function(){r()(window.HUE_CONTAINER).removeClass("modal-open"),r()(".modal-backdrop").remove()})}()}),o&&o().filechooserDisabled&&c.addClass("disabled").attr("disabled","disabled"),c},text2Url:function(e){for(var t=0,a=e.length,s=function(){var a=[],s=e[t];s.innerHTML.replace(/&nbsp;/g," ").split(" ").forEach(function(e){var t=null,s=/(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?/gi;s.test(e)?(t=e.match(s),e=e.replace(t,'<a href="'+t+'">'+t+"</a>"),a.push(e)):a.push(e)}),s.innerHTML=a.join(" ")};t<a;t++)s()},htmlEncode:function(e){return r()("<div/>").text(e).html()},html2text:function(e){return r()("<div/>").html(e).text().replace(/\u00A0/g," ")},goFullScreen:function(){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement||(document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.msRequestFullscreen?document.documentElement.msRequestFullscreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullscreen&&document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT))},exitFullScreen:function(){(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)&&(document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen())},changeURL:n,replaceURL:function(e){window.history.replaceState(null,null,e)},changeURLParameter:l,removeURLParameter:function(e){l(e,null)},parseHivePseudoJson:function(e){var t={};e&&e.length>2&&e.substring(1,e.length-1).split(", ").forEach(function(e){e.indexOf("=")>-1&&(t[e.split("=")[0]]=e.split("=")[1])});return t},isOverflowing:function(e){return e instanceof r.a&&(e=e[0]),e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth},waitForRendered:function e(t,a,s,o){var i=t instanceof r.a?t:r()(t);if(a(i))s(i);else{window.clearTimeout(i.data("waitForRenderTimeout"));var n=window.setTimeout(function(){e(t,a,s)},o||100);i.data("waitForRenderTimeout",n)}},waitForObservable:function(e,t){if(e())t(e);else var a=e.subscribe(function(s){s&&(a.dispose(),t(e))})},waitForVariable:function e(t,a,s){t?a(t):window.setTimeout(function(){e(t,a)},s||100)},scrollbarWidth:function(){var e=r()('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo(HUE_CONTAINER),t=e.children(),a=t.innerWidth()-t.height(99).innerWidth();return e.remove(),a},getSearchParameter:function(e,t,a){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var s=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return a&&null===s?null:null===s?"":decodeURIComponent(s[1].replace(/\+/g," "))},logError:function(e){void 0!==window.console&&void 0!==window.console.error&&(void 0!==e&&console.error(e),console.error((new Error).stack))},equalIgnoreCase:function(e,t){return e&&t&&e.toLowerCase()===t.toLowerCase()},deXSS:function(e){return null!=e&&"string"==typeof e?e.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,""):e},getStyleFromCSSClass:function(e){for(var t=0;t<document.styleSheets.length;t++)for(var a=document.styleSheets[t].rules||document.styleSheets[t].cssRules,s=0;s<a.length;s++)if(a[s].selectorText===e)return a[s].style?a[s].style:a[s]},highlight:function(e,t){if(""===t||""===e)return e;var a,s=e,r="";t=t.toLowerCase();do{(a=s.toLowerCase().indexOf(t))>=0?(r+=s.substring(0,a)+"<strong>"+s.substring(a,a+t.length)+"</strong>",s=s.substring(a+t.length)):r+=s}while(a>=0);return r},dfs:c,deleteAllEmptyStringKey:function(e){c(e,function(e,t){e[t]||"string"!=typeof e[t]||delete e[t]})},UUID:function(){return u()+u()+"-"+u()+"-"+u()+"-"+u()+"-"+u()+u()+u()},escapeOutput:function(e){return r()("<span>").text(e).html().trim()},stripHtmlFromFunctions:function(e){var t=e,a=t.match(/{{#(.[\s\S]*?){{\//g);return a&&r.a.each(a,function(e,a){var s,o;t=t.replace(a,a.substr(0,a.indexOf("}}")+2)+r.a.trim((s=a.substr(a.indexOf("}}")+2).slice(0,-3),(o=document.createElement("DIV")).innerHTML=s,o.textContent||o.innerText))+"{{/")}),t}}}}]);
//# sourceMappingURL=hue~notebook-bundle-c73ead5c4cc870298ae9.js.map